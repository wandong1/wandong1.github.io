<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.102.3"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>万东的云计算运维博客</title><meta name=keywords content="Blog,Portfolio,PaperMod"><meta name=description content="ExampleSite description"><meta name=author content="Me"><link rel=canonical href=https://wandong1.github.io/><link crossorigin=anonymous href=/assets/css/stylesheet.min.77d563e104d7b39d673d4f21adf63da1ad0244dbcd78291ac2b44dc25b0066e1.css integrity="sha256-d9Vj4QTXs51nPU8hrfY9oa0CRNvNeCkawrRNwlsAZuE=" rel="preload stylesheet" as=style><link rel=icon href=https://wandong1.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://wandong1.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://wandong1.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://wandong1.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://wandong1.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://wandong1.github.io/index.xml><link rel=alternate type=application/json href=https://wandong1.github.io/index.json><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="万东的云计算运维博客"><meta property="og:description" content="ExampleSite description"><meta property="og:type" content="website"><meta property="og:url" content="https://wandong1.github.io/"><meta property="og:image" content="https://wandong1.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wandong1.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="万东的云计算运维博客"><meta name=twitter:description content="ExampleSite description"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"万东的云计算运维博客","url":"https://wandong1.github.io","description":"ExampleSite description","thumbnailUrl":"https://wandong1.github.io/%3Clink%20/%20abs%20url%3E","sameAs":["https://github.com/wandong1"]}</script></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wandong1.github.io accesskey=h title="万东的云计算运维博客 (Alt + H)"><img src=https://wandong1.github.io/img-icon.png alt=logo aria-label=logo height=35>万东的云计算运维博客</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://wandong1.github.io/categories/ title=分类><span>分类</span></a></li><li><a href=https://wandong1.github.io/tags/ title=标签><span>标签</span></a></li><li><a href=https://wandong1.github.io/archives/ title=归档><span>归档</span></a></li><li><a href=https://wandong1.github.io/search title=搜索><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2>企业级镜像仓库harbor</h2></header><section class=entry-content><p>概述 Harbor是由VMWare公司开源的容器镜像仓库。事实上，Harbor是在Docker Registry上进行了相应的企业级扩展，从而获得了更加广泛的应用，这些新的企业级特性包括：管理用户界面，基于角色的访问控制，AD/LDAP集成以及审计日志等，足以满足基本企业需求。 官方：https://goharbor.io/ Github：https://github.com/goharbor/harbor
部署先决条件 服务器硬件配置： •最低要求：CPU2核/内存4G/硬盘40GB •推荐：CPU4核/内存8G/硬盘160GB 软件： •Docker CE 17.06版本+ •Docker Compose1.18版本+ Harbor安装有2种方式： •在线安装：从Docker Hub下载Harbor相关镜像，因此安装软件包非常小 •离线安装：安装包包含部署的相关镜像，因此安装包比较大
Harbor部署HTTP 1、先安装Docker和Docker Compose https://github.com/docker/compose/releases
mv docker-compose-Linux-x86_64 /usr/bin/docker-compose && chmod +x /usr/bin/docker-compose 2、部署Harbor HTTP https://github.com/goharbor/harbor/releases
tar zxvf harbor-offline-installer-v2.0.0.tgz cd harbor cp harbor.yml.tmpl harbor.yml vi harbor.yml hostname: reg.myharbor.com https: # 先注释https相关配置 harbor_admin_password: Harbor12345 ./prepare ./install.sh # 查看已安装的依赖容器 docker-compose ps # 重启docker-compose docker-compose down docker-compose up -d web界面登录：IP：80端口访问， 用户名 admin/Harbor12345
http部署方式基本使用 1、配置http镜像仓库可信任
vi /etc/docker/daemon.json {"insecure-registries":["reg....</p></section><footer class=entry-footer>1 min&nbsp;·&nbsp;132 words&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 企业级镜像仓库harbor" href=https://wandong1.github.io/post/%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93harbor/></a></article><article class=post-entry><header class=entry-header><h2>深入理解Mysql索引底层数据结构与算法</h2></header><section class=entry-content><p>索引的本质 索引是帮助MySQL高效获取数据的排好序的数据结构
索引数据结构 •二叉树
•红黑树
•Hash表
•B-Tree
B-Tree 结构 •叶节点具有相同的深度，叶节点的指针为空
•所有索引元素不重复
•节点中的数据索引从左到右递增排列
B+Tree结构 •非叶子节点不存储data，只存储索引(冗余)，可以放更多的索引
•叶子节点包含所有索引字段
•叶子节点用指针连接，提高区间访问的性能
hash结构 •对索引的key进行一次hash计算就可以定位出数据存储的位置
•很多时候Hash索引要比B+ 树索引更高效
•仅能满足 “=”，“IN”，不支持范围查询
•hash冲突问题
MyISAM存储引擎索引实现 •MyISAM索引文件和数据文件是分离的(非聚集), 索引树只存对应数据的磁盘文件地址，myisam数据文件分为三种，表结构，数据，索引
InnoDB存储引擎索引实现 •InnoDB索引实现(聚集)
•表数据文件本身就是按B+Tree组织的一个索引结构文件
•聚集索引-叶节点包含了完整的数据记录
•为什么建议InnoDB表必须建主键，并且推荐使用整型的自增主键？
•为什么非主键索引结构叶子节点存储的是主键值？(一致性和节省存储空间)
索引最左前缀原理 •联合索引的底层存储结构长什么样？</p></section><footer class=entry-footer>1 min&nbsp;·&nbsp;34 words&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 深入理解Mysql索引底层数据结构与算法" href=https://wandong1.github.io/post/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3mysql%E7%B4%A2%E5%BC%95%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/></a></article><article class=post-entry><header class=entry-header><h2>网络设备巡检命令</h2></header><section class=entry-content><p>display clock display license display version dir display boot-loader display cpu-usage display memory display environment display device verbose display device manuinfo display power display fan display alarm display transceiver alarm interface display transceiver diagnosis interface display stp brief display stp root display stp reg display arp display mac-address display vrrp display interface display interface brief display counters inbound interface display counters outbound interface display counters rate inbound interface display counters rate inbound interface display lldp neighbor-information list display irf display irf link display irf topology display logbuffer display current-configuration</p></section><footer class=entry-footer>1 min&nbsp;·&nbsp;89 words&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 网络设备巡检命令" href=https://wandong1.github.io/post/%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E5%B7%A1%E6%A3%80%E5%91%BD%E4%BB%A4/></a></article><article class=post-entry><header class=entry-header><h2>钉钉群机器人推送脚本</h2></header><section class=entry-content><p>import requests import json import os, sys class PushMessage: def __init__(self): # self.test_ip_lst = ['114.114.114.114','223.5.5.5'] self.test_ip_lst = ["23.134.37.253","59.214.26.21","23.137.37.1"] self.alarm_info = '电子政务外网地址探测:\n' self.is_atall = 'false' self.dingding_url = "https://oapi.dingtalk.com/robot/send?access_token=1c1" self.push = False def dingding_qun(self): headers = { 'Content-Type': 'application/json;charset=utf-8' } url = """{}""".format(self.dingding_url) # data_markdown = { # "msgtype": "markdown", # "markdown": { # "title":"杭州天气", # "text": "#### 杭州天气 @18182294500 \n> 9度，西北风1级，空气良89，相对温度73%\n> ![screenshot](https://img.alicdn.com/tfs/TB1NwmBEL9TBuNjy1zbXXXpepXa-2400-1218.png)\n> ###### 10点20分发布 [天气](https://www.dingalk.com) \n" # }, # "at": { # "atMobiles": [ # "18500" # ], # "atUserIds": [ # "user123" # ], # "isAtAll": "false" # } # } data_text = { "at": { "atMobiles": [ "" ], "atUserIds": [ "user123" ], "isAtAll": "{}"....</p></section><footer class=entry-footer>2 min&nbsp;·&nbsp;228 words&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 钉钉群机器人推送脚本" href=https://wandong1.github.io/post/%E9%92%89%E9%92%89%E7%BE%A4%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%8E%A8%E9%80%81%E8%84%9A%E6%9C%AC/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://wandong1.github.io/page/5/>« Prev Page</a></nav></footer></main><footer class=footer><span>&copy; 2022 <a href=https://wandong1.github.io>万东的云计算运维博客</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>